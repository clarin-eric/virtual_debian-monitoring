This virtualized application/service consists of the CLARIN monitoring setup. This repository can be used to build e.g. a Docker container image.

== To build

* Clone this repository (once).
* `cd` to its root directory.
* Retrieve the submodules under link:resources/[`resources/`] (once):
+
[source,Sh]
----
git submodule update --init --recursive
----
+
* To pull in the latest revisions (on the `master` branch) of the submodules, issue:
+
[source,Sh]
----
sudo -E env GIT_SSH_COMMAND="sudo -u '#'$(id -u) ssh" git submodule update --recursive --remote
----
* `cd` back to your local repository copy's root directory.
* Build the virtualized application, by issuing:
+
[source,Sh]
----
packer build 'packer.json'
----

== To configure

[source,Sh]
----
docker create \
    --entrypoint='/bin/bash' \
    --interactive=true \
    --name='debian-monitoring-latest' \
    --tty=true \
    --volume="$(readlink -f 'resources/srv/'):/srv/" \
    'docker.clarin.eu/debian-monitoring:latest'
----

== To run

[source,Sh]
----
docker start \
    --attach=true \
    'debian-monitoring-latest'
----

== To test

Travis CI pulls this Docker container image from the CLARIN Docker Registry, and then performs the tests by executing link:resources/srv/test.sh[`resources/srv/test.sh`]. This script file is mapped to `/srv/test.sh` within the container by default.